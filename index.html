<!-- index.html -->
<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EphemText</title>
<link href="./public/tailwind.css" rel="stylesheet">
<style>
    .drag-region {
    -webkit-app-region: drag;
    }
    .no-drag {
    -webkit-app-region: no-drag;
    }
</style>
</head>

<body class="h-full m-0 overflow-hidden bg-zinc-100 dark:bg-zinc-950 flex flex-col">

  <!-- Header -->
<div
class="w-full flex items-center justify-between px-4 py-2 bg-gray-50 dark:bg-zinc-950 border-b border-zinc-300 dark:border-zinc-800 drag-region">
  <!-- Left: Window Controls -->
<div class="title-bar-controls flex space-x-2 no-drag">
    <button id="close-btn" aria-label="Close" class="w-3 h-3 bg-red-500 rounded-full hover:bg-red-600 focus:outline-none"></button>
    <button id="minimize-btn" aria-label="Minimize"
    class="w-3 h-3 bg-yellow-500 rounded-full hover:bg-yellow-600 focus:outline-none"></button>
    <button id="maximize-btn" aria-label="Maximize"
    class="w-3 h-3 bg-green-500 rounded-full hover:bg-green-600 focus:outline-none"></button>
  </div>

  <!-- Center: Filename -->
<div class="flex justify-center flex-1 no-drag">
<input type="text" id="filename-input" value="ephemeral-text" placeholder="ephemeral-text"
      class="bg-transparent text-md text-center text-gray-500 dark:text-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 px-2 py-1 rounded">
  </div>

  <!-- Right: Controls -->
<div class="flex space-x-2 no-drag">
    <button id="info-toggle"
      class="px-2 py-2 rounded-lg border border-zinc-200 dark:border-zinc-800 text-gray-800 dark:text-gray-200 hover:bg-zinc-200 dark:hover:bg-zinc-900 transition-colors duration-200">
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10" />
        <line x1="12" y1="16" x2="12" y2="12" />
        <line x1="12" y1="8" x2="12.01" y2="8" />
      </svg>
    </button>
    <button id="theme-toggle"
      class="px-2 py-2 rounded-lg border border-zinc-200 dark:border-zinc-800 text-gray-800 dark:text-gray-200 hover:bg-zinc-200 dark:hover:bg-zinc-900 transition-colors duration-200">
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-moon dark:hidden">
        <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
      </svg>
      <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-sun hidden dark:block">
        <circle cx="12" cy="12" r="4"></circle>
        <path d="M12 2v2"></path>
        <path d="M12 20v2"></path>
        <path d="m4.93 4.93 1.41 1.41"></path>
        <path d="m17.66 17.66 1.41 1.41"></path>
        <path d="M2 12h2"></path>
        <path d="M20 12h2"></path>
        <path d="m4.93 19.07 1.41-1.41"></path>
        <path d="m17.66 6.34 1.41-1.41"></path>
      </svg>
    </button>
  </div>
</div>


<!-- Main Content -->
<div class="flex-grow relative">
    <!-- Save Modal -->
    <div id="save-modal" class="absolute inset-0 bg-zinc-100/90 dark:bg-zinc-950/90 flex items-center justify-center z-20 hidden">
        <div class="bg-gray-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 max-w-sm w-full mx-4">
            <h2 class="text-xl font-semibold mb-6 text-gray-800 dark:text-gray-200">Save as...</h2>
            <div class="flex flex-col space-y-3">
                <button id="save-as-md" class="w-full px-4 py-2 rounded-lg border border-zinc-200 dark:border-zinc-800 text-gray-800 dark:text-gray-200 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors duration-200">
                    Save as Markdown (.md)
                </button>
                <button id="save-as-txt" class="w-full px-4 py-2 rounded-lg border border-zinc-200 dark:border-zinc-800 text-gray-800 dark:text-gray-200 hover:bg-zinc-200 dark:hover:bg-zinc-800 transition-colors duration-200">
                    Save as Text (.txt)
                </button>
            </div>
        </div>
    </div>
    
    <div id="info-overlay"
          class="absolute inset-0 bg-zinc-100/90 dark:bg-zinc-950/90 flex items-center justify-center z-20 hidden">

        <div class="text-center text-gray-600 dark:text-gray-400 max-w-lg">
            <h2 class="text-xl font-semibold mb-4">This is Ephemeral Text</h2>
            <p class="text-xs mb-6">A simple text editor that doesn't save files automatically or know how to open them. Export your text when you need to keep it.</p>
                        <h3 class="text-lg font-semibold mb-3">App Shortcuts</h3>
                        <div class="text-xs space-y-1 mb-4">
                            <p>ESC <span class="text-gray-500 dark:text-gray-500">Exit Fullscreen</span></p>
                            <p>⌘/Ctrl + S <span class="text-gray-500 dark:text-gray-500">Save File</span></p>
                            <p>⌘/Ctrl + W <span class="text-gray-500 dark:text-gray-500">Close Window</span></p>
                            <p>⌘/Ctrl + N <span class="text-gray-500 dark:text-gray-500">New Window</span></p>
                        </div>

                        <h3 class="text-lg font-semibold mb-3">Markdown Shortcuts</h3>
                        <div class="text-xs space-y-1">
                            <p>⌘/Ctrl + B <span class="text-gray-500 dark:text-gray-500">Bold</span></p>
                            <p>⌘/Ctrl + I <span class="text-gray-500 dark:text-gray-500">Italic</span></p>
                            <p>⌘/Ctrl + 1-6 <span class="text-gray-500 dark:text-gray-500">Headings</span></p>
                            <p>⌘/Ctrl + K <span class="text-gray-500 dark:text-gray-500">Links</span></p>
                            <p>⌘/Ctrl + Shift + C <span class="text-gray-500 dark:text-gray-500">Code Blocks</span></p>
                            <p>⌘/Ctrl + Shift + Q <span class="text-gray-500 dark:text-gray-500">Blockquotes</span></p>
                        </div>
        </div>
    </div>
    
    <textarea id="editor"
    class="w-full h-full p-6 resize-none outline-none bg-gray-50 dark:bg-zinc-950 text-gray-900 dark:text-gray-100 font-mono text-sm transition-colors duration-200 placeholder-gray-500 caret-blue-500"
    placeholder="I'm writing it down to remember it now..."></textarea>
</div>

<!-- Footer -->
<div
  class="w-full flex flex-wrap sm:flex-nowrap items-center justify-between px-4 py-2 bg-gray-50 dark:bg-zinc-950 border-t border-gray-300 dark:border-zinc-800">
  <!-- Left Section -->
  <div class="flex flex-col w-full sm:w-auto mb-2 sm:mb-0">
    <!-- <span class="text-xs text-gray-500 dark:text-gray-500">by @nothingdao</span> -->

    <div id="last-export-container"
      class="flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 cursor-pointer hidden">
      <span id="last-export-dot" class="h-2 w-2 rounded-full bg-green-500 animate-pulse hidden"></span>
      <span id="last-export"></span>
      <!-- External Link Icon -->
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-view">
        <path d="M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2" />
        <path d="M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2" />
        <circle cx="12" cy="12" r="1" />
        <path d="M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0" />
      </svg>
    </div>

  </div>

  <!-- Right Section -->
  <div class="flex flex-col sm:flex-row items-center sm:space-x-4 w-full sm:w-auto">
    <!-- Export Options -->
    <div class="flex items-center justify-center sm:justify-start space-x-2 mb-2 sm:mb-0">
      <button id="download-txt"
        class="flex items-center text-gray-800 dark:text-gray-400 hover:dark:text-gray-200 transition-colors duration-200">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        <span class="ml-1 text-xs">TXT</span>
      </button>
      <button id="download-markdown"
        class="flex items-center text-gray-800 dark:text-gray-400 hover:dark:text-gray-200 transition-colors duration-200">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="7 10 12 15 17 10"></polyline>
          <line x1="12" y1="15" x2="12" y2="3"></line>
        </svg>
        <span class="ml-1 text-xs">Markdown</span>
      </button>
    </div>

    <!-- Directory Export -->
    <div class="flex items-center justify-center sm:justify-start space-x-2">
      <button id="export-dir-btn"
        class="text-gray-800 dark:text-gray-400 hover:dark:text-gray-200 transition-colors duration-200">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 4h4l2 2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V6a2 2 0 1 1 2-2z" />
        </svg>
      </button>
      <span id="export-dir-display" class="text-xs text-gray-500 dark:text-gray-500"></span>
    </div>
  </div>
</div>



<script src="renderer.js"></script>

<script>
// Register keyboard shortcuts AFTER page load
window.electron.registerKeyboardShortcuts();
</script>
</body>

</html>
